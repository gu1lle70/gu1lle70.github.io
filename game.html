<!doctype html>
<html>
<head>
<title>  GuillemSalas PaginaGITHUB (M04UF1) </title> 
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css?family=Roboto+Mono&subset=greek,cyrillic" rel="stylesheet">
    
<link rel="stylesheet" href="base.css" />
<link rel="stylesheet" href="game.css" />
    
<script>

let game_data;
    
let current_room = 0;
let items_picked = [];
     
function game (data)
{
    game_data = data;
    
    document.getElementById("terminal").innerHTML = "<p><strong>¡Bienvenidos a ENTIerrame!</strong> El juego de terrror definitivo.</p>";
    
    document.getElementById("terminal").innerHTML += "<p>Te encuentras en "+game_data.rooms[current_room].name+". ¿Que quieres hacer?</p>";
    
    
}

function terminal_out (info)
    {
        
        let terminal = document.getElementById("terminal");
        terminal.innerHTML += info;
        terminal.scrollTop = terminal.scrollHeight;
    }
    
function parseCommand (command)
{
    
     console.log("Commando", command);
    switch (command){
		case "ver":
			terminal_out("<p>"+game_data.rooms[current_room].description+"</p>");
			break;

		case "ir":
			let doors = "";
			let doors_num = game_data.rooms[current_room].doors.length;
            
			for (let i = 0; i < doors_num; i++){
				doors += game_data.rooms[current_room].doors[i]+" ";
			}
            
			terminal_out("<p>Puedes ir a: "+doors+"</p>");
			break;

		default:
			terminal_out("<p><strong>Error</strong>: "+command+" commando no encontrado</p>");
        
        
    }
}

function parseInstruction (instruction)
{
    
    console.log("Instrucción", instruction);

}
    
function readAction ()
{
    
    let instruction = document.getElementById("commands").value;  
    let instruction_trim = instruction.trim();
    
    let data = instruction_trim.split(" ");
    
        console.log(data);
    
    if (data.lenght == 0 || instruction_trim == ""){
        
    terminal_out("<p><strong>Error</strong>: Escribe una instrucción</p>");
    return;  
        
    }
    if (data.lenght == 1){
        
          parseCommand(data[0]);
        
    }
    else{
        
         parseInstruction(data)
        
    }
    
}
    
    
    
fetch("https://gu1lle70.github.io/game.json").then(response => response.json()).then(data => game(data));      
    
        

</script>
</head>

<body>
<header>
<h1> GuillemPage  </h1>
<nav>
<ul id="main-menu">
<ul id="main-menu">
<li id="menu-prenetacion"><a href="index.html"> Presentació </a></li>
<li id="menu-hobbies"><a href="hobbies.html"> Hobbies </a></li>
<li id="manu-contacte"><a href="contacte.html"> Contacte</a></li>
<li id="menu-CV"><a href="cv.html"> CV </a></li>
<li id="menu-game"><a href="game.html"> Game </a></li>
</ul>
</nav>
</header>
    
<main>

<form>
<div id="terminal"> </div> 
<p><label>Introduce comando:</label> <input type="text" id="commands" /></p>   
<input type="submit" value="Acción" onclick="readAction(); return false;"/>    
</form>   
    
    
<article>
</article>


<aside>
</aside>




</main>




<footer>
<p> GuillemSalas (c) <span id="footer-year">2022</span></p>
<script>
document.getElementById("footer-year").innerHTML = new Date().getFullYear();
</script>
</footer>
</body>
</html>